<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7 | Oscar&#39;s Pathways</title>
    <meta name="description" content="蘋果真高價，何不自己架？ 如果覺得 Mac Pro 很貴，或是說需要更進一步客製化硬體，何不考慮自己在伺服器上架設一台 Mac 呢？要多少 Storage 和 Memory 就有多少。總之，能省錢又不犧牲效能，就是爽！網路上有一些關於 ESXi 安裝 macOS 的教學，但是大多是給 VMware Workstation，不然就是版本不夠新，這裡提供我親自嘗試過、可行的且最新的 ESXi 搭配 macOS 的安裝方式。">
    <link rel="icon" href="/logo.png">
  <meta name="theme-color" content="#333333">
  <meta prefix="og: http://ogp.me/ns#" property="og:title" content="Oscar&#39;s Pathways">
  <meta prefix="og: http://ogp.me/ns#" property="og:type" content="article">
  <meta prefix="og: http://ogp.me/ns#" property="og:url" content="http://lytzeng.github.io">
  <meta prefix="og: http://ogp.me/ns#" property="og:image" content="/logo.png">
  <meta prefix="og: http://ogp.me/ns#" property="og:article:author" content="Li-Yen Tseng">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/logo.png">
  <link rel="mask-icon" href="/logo.svg" color="#333333">
  <meta name="msapplication-TileColor" content="#333333">
  <meta name="google-site-verification" content="luVocIl3165-z3eRtc2ux4f0_QqyqMiauRI-fD0GoJ0">
  <link rel="alternate" type="application/rss+xml" href="http://lytzeng.github.io/rss.xml" title="Oscar&#39;s Pathways RSS Feed">
  <link rel="alternate" type="application/atom+xml" href="http://lytzeng.github.io/feed.atom" title="Oscar&#39;s Pathways Atom Feed">
  <link rel="alternate" type="application/json" href="http://lytzeng.github.io/feed.json" title="Oscar&#39;s Pathways JSON Feed"><link rel='canonical' href='http://lytzeng.github.io/posts/misc/Installing-macOS-on-ESXi.html'/>
    <meta name="image" content="https://i.imgur.com/BojArA4.png"><meta name="twitter:title" content="想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7"><meta name="twitter:description" content="蘋果真高價，何不自己架？ 如果覺得 Mac Pro 很貴，或是說需要更進一步客製化硬體，何不考慮自己在伺服器上架設一台 Mac 呢？要多少 Storage 和 Memory 就有多少。總之，能省錢又不犧牲效能，就是爽！網路上有一些關於 ESXi 安裝 macOS 的教學，但是大多是給 VMware Workstation，不然就是版本不夠新，這裡提供我親自嘗試過、可行的且最新的 ESXi 搭配 macOS 的安裝方式。"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://i.imgur.com/BojArA4.png"><meta name="twitter:url" content="http://lytzeng.github.io/posts/misc/Installing-macOS-on-ESXi.html"><meta property="og:type" content="article"><meta property="og:title" content="想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7"><meta property="og:description" content="蘋果真高價，何不自己架？ 如果覺得 Mac Pro 很貴，或是說需要更進一步客製化硬體，何不考慮自己在伺服器上架設一台 Mac 呢？要多少 Storage 和 Memory 就有多少。總之，能省錢又不犧牲效能，就是爽！網路上有一些關於 ESXi 安裝 macOS 的教學，但是大多是給 VMware Workstation，不然就是版本不夠新，這裡提供我親自嘗試過、可行的且最新的 ESXi 搭配 macOS 的安裝方式。"><meta property="og:image" content="https://i.imgur.com/BojArA4.png"><meta property="og:url" content="http://lytzeng.github.io/posts/misc/Installing-macOS-on-ESXi.html"><meta property="article:tag" content="VMware"><meta property="article:tag" content="vSphere"><meta property="article:tag" content="macOS"><meta itemprop="name" content="想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7"><meta itemprop="description" content="蘋果真高價，何不自己架？ 如果覺得 Mac Pro 很貴，或是說需要更進一步客製化硬體，何不考慮自己在伺服器上架設一台 Mac 呢？要多少 Storage 和 Memory 就有多少。總之，能省錢又不犧牲效能，就是爽！網路上有一些關於 ESXi 安裝 macOS 的教學，但是大多是給 VMware Workstation，不然就是版本不夠新，這裡提供我親自嘗試過、可行的且最新的 ESXi 搭配 macOS 的安裝方式。"><meta itemprop="image" content="https://i.imgur.com/BojArA4.png">
    <link rel="preload" href="/assets/css/0.styles.17b9e74b.css" as="style"><link rel="preload" href="/assets/js/app.042c12de.js" as="script"><link rel="preload" href="/assets/js/3.78e23531.js" as="script"><link rel="preload" href="/assets/js/2.d598f8a7.js" as="script"><link rel="preload" href="/assets/js/4.8f3ebbd5.js" as="script"><link rel="preload" href="/assets/js/15.c9684c38.js" as="script"><link rel="prefetch" href="/assets/js/10.30b4c291.js"><link rel="prefetch" href="/assets/js/11.1f7e06e4.js"><link rel="prefetch" href="/assets/js/12.4a085e30.js"><link rel="prefetch" href="/assets/js/13.16c46bdf.js"><link rel="prefetch" href="/assets/js/14.3b369c90.js"><link rel="prefetch" href="/assets/js/16.816381b3.js"><link rel="prefetch" href="/assets/js/17.edccfcd3.js"><link rel="prefetch" href="/assets/js/18.7b0d8e37.js"><link rel="prefetch" href="/assets/js/19.65eb099a.js"><link rel="prefetch" href="/assets/js/20.35176dac.js"><link rel="prefetch" href="/assets/js/21.9ecb8a02.js"><link rel="prefetch" href="/assets/js/22.60b176bd.js"><link rel="prefetch" href="/assets/js/23.5d108a75.js"><link rel="prefetch" href="/assets/js/24.4b6880b8.js"><link rel="prefetch" href="/assets/js/25.659eb325.js"><link rel="prefetch" href="/assets/js/26.5e6de916.js"><link rel="prefetch" href="/assets/js/27.8b37699f.js"><link rel="prefetch" href="/assets/js/28.fc7a997f.js"><link rel="prefetch" href="/assets/js/29.aaf9267d.js"><link rel="prefetch" href="/assets/js/5.b4031e56.js"><link rel="prefetch" href="/assets/js/6.11d98fd7.js"><link rel="prefetch" href="/assets/js/7.2c82dbd9.js"><link rel="prefetch" href="/assets/js/8.501e2da0.js"><link rel="prefetch" href="/assets/js/9.6174fe55.js">
    <link rel="stylesheet" href="/assets/css/0.styles.17b9e74b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Oscar's Pathways" class="logo"> <span class="site-name can-hide">Oscar's Pathways</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/categories/" class="nav-link">Categories</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div class="bio bio-sidebar"><div class="img-holder"><img src="https://avatars3.githubusercontent.com/u/30722178?s=460&v=4"></div> <p class="name">Oscar Tseng</p> <div style="border-bottom: 1px solid hsl(0, 0%, 30%); border-top: 1px solid hsl(0, 0%, 30%);"><div style="display: inline-block; padding: 0 10px; border-right: 1px solid hsl(0, 0%, 30%); margin: 5px 0"><a href="/categories/"><span style="display:block;font-family:'Noto Sans TC Medium';font-size:20px;">9</span> <span>Posts</span></a></div> <div style="display: inline-block; padding: 0 10px; margin: 5px 0"><a href="/tags/"><span style="display:block;font-family:'Noto Sans TC Medium';font-size:20px;">11</span> <span>Tags</span></a></div></div> <div style="display: flex; justify-content: center; padding-top: 5px; padding-bottom: 5px; border-bottom: 1px solid hsl(0, 0%, 30%);"><span style="width: 32px; height: 32px;"><a href="https://github.com/LYTzeng" target="_blank" rel="noopener" title="Github"><svg fill="#e6e6e6" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" style="will-change: transform;"><path fill-rule="evenodd" d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45 3 3 0 0 0 4.08 1.16 2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76 5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7 5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2z"></path></svg></a></span> <span style="width: 32px; height: 32px;"><a href="https://www.linkedin.com/in/li-yen-tseng/" target="_blank" rel="noopener" title="Linkedin"><svg fill="#e6e6e6" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" style="will-change: transform;"><path d="M26.21 4H5.79A1.78 1.78 0 0 0 4 5.73V26.2a1.77 1.77 0 0 0 1.79 1.73h20.42A1.77 1.77 0 0 0 28 26.2V5.73A1.78 1.78 0 0 0 26.21 4zm-15.1 20.41H7.59V13h3.52zm-1.72-13a2.07 2.07 0 0 1-2.07-2.02 2 2 0 0 1 2.07-2.07 2.07 2.07 0 0 1 0 4.13zm15.09 12.93H21v-5.58c0-1.33 0-3.06-1.86-3.06S17 17.16 17 18.63v5.65h-3.56V13h3.32v1.5h.07a3.72 3.72 0 0 1 3.39-1.86c3.59 0 4.26 2.4 4.26 5.45z"></path></svg></a></span> <span style="width: 32px; height: 32px;"><a href="mailto:oscar217b@gmail.com" target="_blank" rel="noopener" title="mail"><svg fill="#e6e6e6" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" style="will-change: transform;"><path d="M28 6H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm-2.2 2L16 14.78 6.2 8zM4 24V8.91l11.43 7.91a1 1 0 0 0 1.14 0L28 8.91V24z"></path><title>Email</title></svg></a></span> <span style="width: 32px; height: 32px;"><a href="/rss.xml" target="_blank" rel="noopener" title="rss" type="application/rss+xml"><svg fill="#e6e6e6" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" style="will-change: transform;"><path d="M8 18c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm22-4h-2C28 13 19 4 8 4V2c12.1 0 22 9.9 22 22z"></path><path d="M22 24h-2c0-6.6-5.4-12-12-12v-2c7.7 0 14 6.3 14 14z"></path><title>Rss</title></svg></a></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/categories/" class="nav-link">Categories</a></div><div class="nav-item"><a href="/tags/" class="nav-link">Tags</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#更新-esxi-6-7-至-update-3" class="sidebar-link">更新 ESXi 6.7 至 Update 3</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#安裝-unlocker" class="sidebar-link">安裝 Unlocker</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#macos-的-vmdk" class="sidebar-link">macOS 的 VMDK</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#建立新的虛擬機器" class="sidebar-link">建立新的虛擬機器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#修改-vmx-設定" class="sidebar-link">修改 VMX 設定</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#在-macos-內安裝-vmware-tools" class="sidebar-link">在 macOS 內安裝 VMware tools</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/misc/Installing-macOS-on-ESXi.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> <div class="sidebar-links"><p class="sidebar-heading"><span>近期文章</span></p> <ul><li><a href="/posts/misc/Installing-macOS-on-ESXi.html" class="sidebar-link recentTitle">想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7</a></li><li><a href="/posts/sdn/introduction-to-ryu.html" class="sidebar-link recentTitle">OpenFlow 1.5 從入門到交報告 (二) - Ryu</a></li><li><a href="/posts/sdn/introduction-to-mininet.html" class="sidebar-link recentTitle">OpenFlow 1.5 從入門到交報告 (一) - Mininet 基本概念</a></li><li><a href="/posts/infra/esxi-server-in-lab-structure.html" class="sidebar-link recentTitle">實驗室自架 Lab 環境 — 網路架構設計</a></li><li><a href="/posts/infra/self-hosted-esxi-server-in-lab.html" class="sidebar-link recentTitle">在實驗室自架 VMware ESXi — 使用電腦教室汰換之電腦</a></li></ul></div> <div class="sidebar-links"><p class="sidebar-heading"><span>Tags</span></p> <div class="tags sidebar-tags sidebar-link"><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/VuePress"><div>VuePress
        <div class="tagcount">3</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/VMware"><div>VMware
        <div class="tagcount">3</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/vSphere"><div>vSphere
        <div class="tagcount">3</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/pfSense"><div>pfSense
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/OpenVPN"><div>OpenVPN
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/Mininet"><div>Mininet
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/OpenFlow"><div>OpenFlow
        <div class="tagcount">2</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/Ryu"><div>Ryu
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/Python"><div>Python
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/心得想法"><div>心得想法
        <div class="tagcount">1</div></div></a></span></span><span><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1><a href="/tags/macOS"><div>macOS
        <div class="tagcount">1</div></div></a></span></span></div></div> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="想擁有一台伺服器等級-mac-macos-10-15-catalina-on-vmware-esxi-6-7"><a href="#想擁有一台伺服器等級-mac-macos-10-15-catalina-on-vmware-esxi-6-7" class="header-anchor">#</a> 想擁有一台伺服器等級 Mac? macOS 10.15 Catalina on VMware ESXi 6.7</h1> <div class="page-edit"><!----> <div title="建立時間" class="timestamp"><span class="prefix"><svg fill="#ececec" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" aria-hidden="true" style="display: inline-block; vertical-align: middle; will-change: transform;"><path d="M26 4.03h-4v-2h-2v2h-8v-2h-2v2H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-20a2 2 0 0 0-2-2zm0 22H6v-14h20zm0-16H6v-4h4v2h2v-2h8v2h2v-2h4z"></path><title>Calendar</title></svg></span> <span class="time">1/28/2020, 1:33:25 AM</span></div></div> <div><div class="taglinks"><a href="/categories/#Misc"><div style="display:inline;"><svg fill="#14cdef" focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" aria-hidden="true" style="display:inline-block;vertical-align:middle;will-change:transform;"><path d="M11.17 6l3.42 3.41.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z"></path><title>Folder</title></svg></div>
  Misc</a> <a href="/tags/VMware"><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1>VMware</span></a><a href="/tags/vSphere"><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1>vSphere</span></a><a href="/tags/macOS"><span class="badge tip" style="vertical-align:center;" data-v-0f5ba3f1>macOS</span></a></div></div> <p><img alt="" data-src="https://i.imgur.com/BojArA4.png" loading="lazy" class="lazy"></p> <blockquote><p>蘋果真高價，何不自己架？ — me</p></blockquote> <p>如果覺得<s>蘋果的刨絲器</s> Mac Pro 很貴，或是說需要更進一步客製化硬體，何不考慮自己在伺服器上架設一台 Mac 呢？要多少 Storage 和 Memory 就有多少。總之，能省錢又不犧牲效能，就是爽！可以參考 <a href="https://www.youtube.com/watch?v=mIB389tqzCI" target="_blank" rel="noopener noreferrer">Linus Tech Tips 對 Mac Pro 的評論<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。網路上有一些關於 ESXi 安裝 macOS 的教學，但是大多是給 VMware Workstation，不然就是版本不夠新，這裡提供我親自嘗試過、可行的且最新的 ESXi 搭配 macOS 的安裝方式。</p> <p><img alt="" data-src="https://i.imgur.com/MkTKNFE.png" loading="lazy" class="lazy">
2019 Mac Pro 選好一點的規格，就跟買車一樣了。</p> <h2 id="更新-esxi-6-7-至-update-3"><a href="#更新-esxi-6-7-至-update-3" class="header-anchor">#</a> 更新 ESXi 6.7 至 Update 3</h2> <p>首先請更新 ESXi Server 到 Update 3，才能支援 MacOS 10.15。我們必須依序從 Update 1 更新到 Update 3。以下過程需要進行三遍，分別安裝三次 Update 的更新。</p> <ol><li><p>到 https://my.vmware.com/group/vmware/patch#search 找到對應版本，下載 zip 檔。Update 1 的檔名為 <code>update-from-esxi6.7-6.7_update01.zip</code>。</p></li> <li><p>讓 Server 進入維護模式。
<img alt="" data-src="https://i.imgur.com/R2FS7Cj.png" loading="lazy" class="lazy"></p></li> <li><p>zip 上傳至 Datastore，SSH 進入 ESXi，執行指令，注意檔名和路徑要改：</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>esxcli software vib <span class="token function">install</span> -d /vmfs/volumes/datastore1/updates/update-from-esxi6.7-6.7_update01.zip
</code></pre></div><ol start="4"><li>重新開機</li></ol> <h2 id="安裝-unlocker"><a href="#安裝-unlocker" class="header-anchor">#</a> 安裝 Unlocker</h2> <p>ESXi 6.7 必須使用 Unlocker 3.0 版才能讓 MacOS 成功開機，舊版本都會進入無限自動重開循環。<strong>如果你的 Server 安裝過 Unlocker，更新 ESXi 後需重新再安裝 Unlocker。</strong></p> <p><strong>下載 ESXi Unlocker 3.0 (二擇一):</strong></p> <ul><li><a href="https://www.insanelymac.com/forum/files/file/964-macos-unlocker-v30-for-vmware-esxi/" target="_blank" rel="noopener noreferrer">Unlocker 作者的載點，需登入會員<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://drive.google.com/file/d/14rkRT8cRavA8QxvTseSQjSUeJ-gZ3WfV/view?usp=sharing" target="_blank" rel="noopener noreferrer">我的 Google Drive 載點<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>將 <code>esxi-unlocker-300.tgz</code> 上傳至 ESXi，在自己電腦執行:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">scp</span> /你的下載路徑/esxi-unlocker-300.tgz root@xxx.xxx.xxx.xxx:/vmfs/volumes/datastore1/
<span class="token builtin class-name">cd</span> /vmfs/volumes/datastore1/
<span class="token function">tar</span> xvf esxi-unlocker-300.tgz
</code></pre></div><p>然後執行 <code>esxi-install.sh</code>，結束後重開機:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>chomod <span class="token number">777</span> esxi-install.sh
./esxi-install.sh
<span class="token function">reboot</span> -f
</code></pre></div><p>Unlocker 安裝完畢後，可以執行<code>esxi-smctest.sh</code> 檢查 Unlocker 是否成功安裝。成功安裝的話會有以下 Output：</p> <div class="language- extra-class"><pre class="language-text"><code>/bin/vmx
smcPresent = true
custom.vgz     false   38930360 B
</code></pre></div><h2 id="macos-的-vmdk"><a href="#macos-的-vmdk" class="header-anchor">#</a> macOS 的 VMDK</h2> <p>接著我們會使用比較不同的安裝方式。有別於一般使用映像檔安裝，我們會先建立一個 VM，再將 macOS 的 VMDK 新增到該 VM。這樣開機時該虛擬硬碟就會被讀取。和 ISO 安裝相比，這是我目前嘗試過成功機率最高的方法。安裝的 macOS 版本是 10.15，請特別留意<a href="https://www.vmware.com/resources/compatibility/pdf/VMware_GOS_Compatibility_Guide.pdf?fbclid=IwAR3TwlRY_63Q5KsiInF-1bnQyNi40OnpElkrZ9TMgfzXgwOST8FMB2MYKFY#page=6" target="_blank" rel="noopener noreferrer">文件中<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>有註明 ESXi 所支援的 macOS 版本。</p> <p><strong>VMDK 載點 (二擇一):</strong></p> <ul><li><a href="https://drive.google.com/drive/folders/1X8ImVEeM5GCvYgGEVifM21E-6Je7dHD3" target="_blank" rel="noopener noreferrer">Geekrar Google Drive 載點<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://drive.google.com/file/d/1xHMtphpCj-EJr687_MQ0cSMlsKk9K-MY/view?usp=sharing" target="_blank" rel="noopener noreferrer">我的 Google Drive 載點<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>把 VMDK 上傳到 ESXi，可以使用任何 UI 或 SCP。接著先使用 VMDK 來登錄虛體機器。
接著我們要對 VMDK 動一點手腳，不然會開不起來，因此要使用<code>vmkfstools</code>轉換 VMDK。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /vmfs/volumes/<span class="token punctuation">[</span>datastore 名稱<span class="token punctuation">]</span>
vmkfs -i macOS_Catalina_Final.vmdk -d thin macOS_Catalina_Final_new.vmdk
</code></pre></div><p>接著開始建立新的虛擬機器。</p> <h2 id="建立新的虛擬機器"><a href="#建立新的虛擬機器" class="header-anchor">#</a> 建立新的虛擬機器</h2> <p><img alt="" data-src="https://i.imgur.com/apJi6c0.png" loading="lazy" class="lazy"></p> <p>OS 請選擇 Apple macOS 10.14 即可。</p> <p><img alt="" data-src="https://i.imgur.com/vGoO0XT.png" loading="lazy" class="lazy"></p> <p>其實對於資源大小沒有別的要求，只要不要太小即可。接著在下面的畫面中，砍掉預設的硬碟，我們要在這裡新增剛剛轉換好的 VMDK 硬碟。</p> <p><img alt="" data-src="https://i.imgur.com/jSDsoCv.png" loading="lazy" class="lazy"></p> <p>選擇「新增磁碟」&gt; 「新增現有磁碟」，如圖：</p> <p><img alt="" data-src="https://i.imgur.com/mihE5cW.png" loading="lazy" class="lazy"></p> <p>接著選擇剛才轉換好的 VMDK <code>macOS_Catalina_Final_new.vmdk</code></p> <p><img alt="" data-src="https://i.imgur.com/Im7EMI8.png" loading="lazy" class="lazy"></p> <p>接著「下一步」、「完成」，成功建立虛擬機器。</p> <h2 id="修改-vmx-設定"><a href="#修改-vmx-設定" class="header-anchor">#</a> 修改 VMX 設定</h2> <p>接著我們要修改 VMX 設定，SSH 進入 ESXi，<code>cd</code>到 VM 的位置。<code>[datastore 名稱]</code>請換成你的 datastore 名稱，<code>[虛擬機器名稱]</code>請換成你的 VM 名稱。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /vmfs/volumes/<span class="token punctuation">[</span>datastore 名稱<span class="token punctuation">]</span>/<span class="token punctuation">[</span>虛擬機器名稱<span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token string">'smc.version = &quot;0&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">[</span>虛擬機器名稱<span class="token punctuation">]</span>.vmx
</code></pre></div><p><img alt="" data-src="https://i.imgur.com/xyIxpjb.png" loading="lazy" class="lazy"></p> <p>接著就可以開機了，開機成功的話會進入各種設定，之後就只要照流程走完即可。</p> <p><img alt="" data-src="https://i.imgur.com/ThA71sp.png" loading="lazy" class="lazy"></p> <p><img alt="" data-src="https://i.imgur.com/3wf0H3L.png" loading="lazy" class="lazy"></p> <h2 id="在-macos-內安裝-vmware-tools"><a href="#在-macos-內安裝-vmware-tools" class="header-anchor">#</a> 在 macOS 內安裝 VMware tools</h2> <p>最後就剩安裝 VMware tools 的部分了，VMware Tools 提供 Guest OS 和 ESXi 的相容度，讓我們可以調整螢幕解析度、。到這個<a href="http://softwareupdate.vmware.com/cds/vmw-desktop/fusion/11.1.0/13668589/packages/com.vmware.fusion.tools.darwin.zip.tar" target="_blank" rel="noopener noreferrer">官方連結<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>下載 VMware tools，解壓縮後把 <code>darwin.iso</code> 檔上傳到 ESXi。</p> <p>接著掛載<code>darwin.iso</code>，macOS 會自動讀取光碟。</p> <p><img alt="" data-src="https://i.imgur.com/RnSlhC8.png" loading="lazy" class="lazy"></p> <p>直接點選 &quot;Install VMware Tools&quot; 並使用「下一步安裝法」。</p> <p><img alt="" data-src="https://i.imgur.com/Ke5X0kX.png" loading="lazy" class="lazy"></p> <p><img alt="" data-src="https://i.imgur.com/LMIzHuK.png" loading="lazy" class="lazy"></p> <p>中間需要從設定那邊 Allow 一下，點選 Allow 即可。</p> <p><img alt="" data-src="https://i.imgur.com/ebkv229.png" loading="lazy" class="lazy"></p> <p><img alt="" data-src="https://i.imgur.com/kuqISrT.png" loading="lazy" class="lazy"></p> <p>安裝完後重開機，即可使用。成功安裝就可以看見 ESXi 偵測到 VMware Tools：
<img alt="" data-src="https://i.imgur.com/5OBM3xJ.png" loading="lazy" class="lazy"></p> <p>如果發現螢幕解析度沒有隨著調整視窗尺寸而改變，請試著提升虛擬顯示卡記憶體。
<img alt="" data-src="https://i.imgur.com/nRWrrGb.png" loading="lazy" class="lazy"></p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://www.stevenannett.co.uk/2019/04/11/how-to-patch-your-vmware-esxi-6-7-server/" target="_blank" rel="noopener noreferrer">How to patch your VMware ESXi 6.7 server - StevenAnnett.co.uk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://blog.ilc.edu.tw/blog/blog/25793/post/105209/690915" target="_blank" rel="noopener noreferrer">頭城國小資訊組 | VMware ESXi - 安裝 macOS Sierra 10.12.4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://blog.sina.com.cn/s/blog_6452c6b40102x313.html" target="_blank" rel="noopener noreferrer">【VMware】失败 - “scsi0:0”的磁盘类型 2 不受支持或无效。请确保磁盘已导入_永无止境的Pasu_新浪博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.geekrar.com/install-macos-mojave-on-vmware/" target="_blank" rel="noopener noreferrer">Install macOS Mojave on VMware on Windows PC - Geekrar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.insanelymac.com/forum/files/file/964-macos-unlocker-v30-for-vmware-esxi/" target="_blank" rel="noopener noreferrer">macOS Unlocker V3.0 for VMware ESXi - Miscellaneous - InsanelyMac Forum<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div id="disqus_thread"></div></div> <!----> </main> <footer><div>
      Copyright © 2019-present Li Yen Tseng, Powered by <a href="http://vuepress.vuejs.org">VuePress</a></div></footer></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.042c12de.js" defer></script><script src="/assets/js/3.78e23531.js" defer></script><script src="/assets/js/2.d598f8a7.js" defer></script><script src="/assets/js/4.8f3ebbd5.js" defer></script><script src="/assets/js/15.c9684c38.js" defer></script>
  </body>
</html>
